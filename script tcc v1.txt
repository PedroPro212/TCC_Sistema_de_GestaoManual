CREATE DATABASE metalurgicasaveiro;
USE metalurgicasaveiro;

CREATE TABLE funcionarios(
	id int primary key auto_increment not null,
    nome varchar(300) not null,
    data_nascimento date,
    cpf varchar(11) not null,
    id_setor int,
    
	foreign key (id_setor) references setor(id)
);

CREATE TABLE setor(
    id int AUTO_INCREMENT PRIMARY KEY NOT null,
    descricao varchar(50) NOT null
);

CREATE TABLE acesso(
    id int primary key auto_increment not null,
    descricao varchar(100)
);

CREATE TABLE login(
	id int PRIMARY KEY AUTO_INCREMENT NOT NULL,
    registro varchar(6),
    senha varchar(6),
    id_acesso int,
    
    FOREIGN KEY (id_acesso) REFERENCES acesso(id)
)

CREATE TABLE TecnicoQualidade(
    id int AUTO_INCREMENT PRIMARY KEY NOT null,
    nome varchar(200) NOT null,
    registro varchar(6) NOT null,
    senha varchar(6) NOT null
);

CREATE TABLE operador(
    id int AUTO_INCREMENT PRIMARY KEY NOT null,
    nome varchar(200) NOT null,
    registro varchar(6) NOT null,
    senha varchar(6) NOT null,
    idSetor int,
    FOREIGN KEY (idSetor) REFERENCES setor(id)
);

CREATE TABLE encarregado(
    id int AUTO_INCREMENT PRIMARY KEY NOT null,
    nome varchar(200) NOT null,
    registro varchar(6) NOT null,
    senha varchar(6) NOT null,
    idSetor int,
    FOREIGN KEY (idSetor) REFERENCES setor(id)
);

CREATE TABLE maquina(
    id varchar(6) PRIMARY KEY NOT null,
    tipo varchar(200) NOT null
);

CREATE TABLE processo(
    id int AUTO_INCREMENT PRIMARY KEY NOT null,
    produto varchar(30) NOT null,
    datahora datetime,
    noPecas int,
    lotePecas varchar(20),
    idOperador int,
    etapaProcesso varchar(30),
    idMaquina varchar(6),
    FOREIGN KEY (idOperador) REFERENCES operador(id),
    FOREIGN KEY (idMaquina) REFERENCES maquina(id),
    loteTinta varchar(20)
);

insert into acesso(descricao) values ("Produção");
insert into acesso(descricao) values ("Supervisor");
insert into acesso(descricao) values ("Técnico de Qualidade");
